<div class="card activity-menu">
  <div class="card-header card actions-menu"><b>Actions</b></div>
  <div class="card-body list-group">
    <div *ngIf="isLoggedIn && user">
        <a *ngIf="isParticipant && activity.state !== 'upcoming'" class="list-group-item list-group-item-action" (click)="updateMyResults()">Update My Results</a>
        <a *ngIf="isParticipant" class="list-group-item list-group-item-action" (click)="leave()">Leave Activity</a>
        <a *ngIf="!isParticipant && (activity.state !== 'finished' &&
                          (activity.owner.id !== user.id ? activity.privacy == 'public' : true)  &&
                          activity.max_participants > activity.participants.length)"
           class="list-group-item list-group-item-action" data-toggle="modal" data-target="#joinDialog" (click)="joinDialog.show()">Join Activity</a>

        <a *ngIf="activity.owner.id == user.id && activity.state === 'upcoming'" class="list-group-item list-group-item-action" (click)="edit()">Edit</a>
        <a *ngIf="activity.owner.id == user.id && activity.state !== 'upcoming'" class="list-group-item list-group-item-action" (click)="updateActivityResults()">Update Results</a>
        <a *ngIf="activity.owner.id == user.id" class="list-group-item list-group-item-action" (click)="deleteActivity()">Delete</a>
    </div>
    <div *ngIf="!isLoggedIn" class="list-group-item list-group-item-action login">
      <app-login-button></app-login-button>
    </div>
    <!--<div class="fb-share-button" style="margin-top: 10px; margin-left: 10px" data-href="{{'http://www.ridemanager.net/activity/' + activity.activity_id }}}" data-layout="button" data-size="small" data-mobile-iframe="true">
      <a class="fb-xfbml-parse-ignore" target="_blank" [href]=" 'https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.ridemanager.net%2Factivity%2F' + activity.activity_id +'&amp;src=sdkpreparse'">Share</a>
    </div>
    <div style="margin-top: 10px; margin-left: 10px">
      <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
    </div>-->
  </div>

</div>

<div #joinDialog *ngIf="activity" class="modal fade" id="joinDialog" role="dialog">
  <app-join-dialog [categories]="activity.categories" (join)="join($event)"></app-join-dialog>
</div>
